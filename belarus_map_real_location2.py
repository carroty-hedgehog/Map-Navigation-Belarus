#!/usr/bin/env python3
"""
–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç—ã –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ë–µ–ª–∞—Ä—É—Å–∏.
–°–æ–∑–¥–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π HTML-—Ñ–∞–π–ª —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Leaflet.js.

–ê–≤—Ç–æ—Ä: MiniMax Agent
–í–µ—Ä—Å–∏—è: 1.1
"""

import json
import os
from datetime import datetime

# ============================================================================
# –†–ê–ó–î–ï–õ 1: –î–ê–ù–ù–´–ï - –ì–û–†–û–î–ê (NODES)
# ============================================================================

CITIES = {
    "–ú–∏–Ω—Å–∫": {"lat": 53.9023, "lon": 27.5619, "offset": [0, -12]},
    "–ë—Ä–µ—Å—Ç": {"lat": 52.0976, "lon": 23.7341, "offset": [0, -12]},
    "–ì—Ä–æ–¥–Ω–æ": {"lat": 53.6694, "lon": 23.8131, "offset": [0, -12]},
    "–õ–∏–¥–∞": {"lat": 53.8833, "lon": 25.3000, "offset": [15, 0]},
    "–ù–æ–≤–æ–≥—Ä—É–¥–æ–∫": {"lat": 53.5922, "lon": 25.8264, "offset": [0, -12]},
    "–ó–∞—Å–ª–∞–≤–ª—å": {"lat": 54.0000, "lon": 27.2667, "offset": [0, -12]},
    "–í–∏–ª–µ–π–∫–∞": {"lat": 54.4917, "lon": 26.9264, "offset": [0, -12]},
    "–ë—Ä–∞—Å–ª–∞–≤": {"lat": 55.6361, "lon": 27.0356, "offset": [0, -12]},
    "–ú–∏–æ—Ä—ã": {"lat": 55.5736, "lon": 27.6503, "offset": [0, -12]},
    "–®–∞—Ä–∫–æ–≤—â–∏–Ω–∞": {"lat": 55.3978, "lon": 28.1511, "offset": [0, -12]},
    "–ü–æ–ª–æ—Ü–∫": {"lat": 55.4878, "lon": 28.7772, "offset": [0, -12]},
    "–í–∏—Ç–µ–±—Å–∫": {"lat": 55.1852, "lon": 30.2022, "offset": [0, -12]},
    "–ù–æ–≤–æ–ª—É–∫–æ–º–ª—å": {"lat": 54.6017, "lon": 29.8444, "offset": [0, -12]},
    "–ú–æ–≥–∏–ª—ë–≤": {"lat": 53.8949, "lon": 30.3317, "offset": [0, -12]},
    "–ì–æ–º–µ–ª—å": {"lat": 52.4345, "lon": 31.0273, "offset": [0, -12]},
    "–°–ª—É—Ü–∫": {"lat": 53.0267, "lon": 27.5431, "offset": [0, -12]},
    "–ù–µ—Å–≤–∏–∂": {"lat": 53.3083, "lon": 26.6806, "offset": [0, -12]},
    "–ü–∏–Ω—Å–∫": {"lat": 52.1128, "lon": 26.0953, "offset": [0, -12]},
}

# ============================================================================
# –†–ê–ó–î–ï–õ 2: –î–ê–ù–ù–´–ï - –ú–ê–†–®–†–£–¢–´ (EDGES)
# ============================================================================

# –†–∞–¥–∏–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –æ—Ç –ú–∏–Ω—Å–∫–∞
RADIAL_ROUTES = [
    {"from": "–ú–∏–Ω—Å–∫", "to": "–ë—Ä–µ—Å—Ç", "distance": "350 –∫–º", "time": "3:45", "color": "blue", "intermediate": [[53.5, 26.5], [53.0, 25.0], [52.5, 24.5]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–ì—Ä–æ–¥–Ω–æ", "distance": "270 –∫–º", "time": "3:00", "color": "blue", "intermediate": [[53.8, 26.5], [53.7, 25.5], [53.65, 24.5]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–ì–æ–º–µ–ª—å", "distance": "320 –∫–º", "time": "3:30", "color": "blue", "intermediate": [[53.7, 28.5], [53.5, 29.5], [53.0, 30.0]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–í–∏—Ç–µ–±—Å–∫", "distance": "280 –∫–º", "time": "3:10", "color": "blue", "intermediate": [[54.2, 28.5], [54.5, 29.0], [54.8, 29.5]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–ú–æ–≥–∏–ª—ë–≤", "distance": "190 –∫–º", "time": "2:15", "color": "blue", "intermediate": [[53.8, 28.5], [53.85, 29.5]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–ü–∏–Ω—Å–∫", "distance": "340 –∫–º", "time": "3:50", "color": "blue", "intermediate": [[53.3, 27.0], [52.9, 26.5], [52.6, 26.2]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–õ–∏–¥–∞", "distance": "210 –∫–º", "time": "2:25", "color": "blue", "intermediate": [[53.9, 26.8], [53.85, 26.3]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–ù–µ—Å–≤–∏–∂", "distance": "120 –∫–º", "time": "1:20", "color": "blue", "intermediate": [[53.7, 27.2]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–°–ª—É—Ü–∫", "distance": "130 –∫–º", "time": "1:30", "color": "blue", "intermediate": [[53.4, 27.5]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–ó–∞—Å–ª–∞–≤–ª—å", "distance": "25 –∫–º", "time": "0:25", "color": "blue", "intermediate": []},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–í–∏–ª–µ–π–∫–∞", "distance": "80 –∫–º", "time": "0:55", "color": "blue", "intermediate": [[54.3, 27.3]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–ù–æ–≤–æ–≥—Ä—É–¥–æ–∫", "distance": "180 –∫–º", "time": "2:00", "color": "blue", "intermediate": [[53.75, 27.0], [53.65, 27.1]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–ü–æ–ª–æ—Ü–∫", "distance": "250 –∫–º", "time": "2:50", "color": "blue", "intermediate": [[54.2, 28.5], [54.7, 28.5]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–ë—Ä–∞—Å–ª–∞–≤", "distance": "240 –∫–º", "time": "2:45", "color": "blue", "intermediate": [[54.5, 27.5], [55.0, 27.3]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–ú–∏–æ—Ä—ã", "distance": "230 –∫–º", "time": "2:40", "color": "blue", "intermediate": [[54.5, 28.0], [55.0, 27.8]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–®–∞—Ä–∫–æ–≤—â–∏–Ω–∞", "distance": "220 –∫–º", "time": "2:35", "color": "blue", "intermediate": [[54.3, 28.0], [54.8, 28.1]]},
    {"from": "–ú–∏–Ω—Å–∫", "to": "–ù–æ–≤–æ–ª—É–∫–æ–º–ª—å", "distance": "180 –∫–º", "time": "2:05", "color": "blue", "intermediate": [[54.3, 28.8]]},
    # –°–ø–µ—Ü–º–∞—Ä—à—Ä—É—Ç –ù–µ—Å–≤–∏–∂ - –ë—Ä–µ—Å—Ç
    {"from": "–ù–µ—Å–≤–∏–∂", "to": "–ë—Ä–µ—Å—Ç", "distance": "290 –∫–º", "time": "3:15", "color": "deeppink", "intermediate": [[53.1, 26.5], [52.9, 26.0], [52.7, 25.5], [52.5, 25.0], [52.3, 24.5]]},
]

# –ö–æ–ª—å—Ü–µ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
CIRCULAR_ROUTES = [
    {"from": "–ë—Ä–µ—Å—Ç", "to": "–ì—Ä–æ–¥–Ω–æ", "distance": "210 –∫–º", "time": "2:20", "color": "red", "intermediate": [[52.8, 24.0], [53.0, 23.9], [53.3, 23.85]]},
    {"from": "–ì—Ä–æ–¥–Ω–æ", "to": "–õ–∏–¥–∞", "distance": "95 –∫–º", "time": "1:05", "color": "red", "intermediate": [[53.75, 24.5]]},
    {"from": "–õ–∏–¥–∞", "to": "–ù–æ–≤–æ–≥—Ä—É–¥–æ–∫", "distance": "65 –∫–º", "time": "0:45", "color": "red", "intermediate": [[53.7, 25.5]]},
    {"from": "–ù–æ–≤–æ–≥—Ä—É–¥–æ–∫", "to": "–ó–∞—Å–ª–∞–≤–ª—å", "distance": "70 –∫–º", "time": "0:50", "color": "red", "intermediate": [[53.75, 26.5]]},
    {"from": "–ó–∞—Å–ª–∞–≤–ª—å", "to": "–í–∏–ª–µ–π–∫–∞", "distance": "65 –∫–º", "time": "0:45", "color": "red", "intermediate": [[54.2, 27.1]]},
    {"from": "–í–∏–ª–µ–π–∫–∞", "to": "–ë—Ä–∞—Å–ª–∞–≤", "distance": "130 –∫–º", "time": "1:30", "color": "red", "intermediate": [[54.9, 27.0]]},
    {"from": "–ë—Ä–∞—Å–ª–∞–≤", "to": "–ú–∏–æ—Ä—ã", "distance": "55 –∫–º", "time": "0:40", "color": "red", "intermediate": [[55.5, 27.3]]},
    {"from": "–ú–∏–æ—Ä—ã", "to": "–®–∞—Ä–∫–æ–≤—â–∏–Ω–∞", "distance": "45 –∫–º", "time": "0:35", "color": "red", "intermediate": [[55.5, 27.9]]},
    {"from": "–®–∞—Ä–∫–æ–≤—â–∏–Ω–∞", "to": "–ü–æ–ª–æ—Ü–∫", "distance": "65 –∫–º", "time": "0:50", "color": "red", "intermediate": [[55.45, 28.5]]},
    {"from": "–ü–æ–ª–æ—Ü–∫", "to": "–í–∏—Ç–µ–±—Å–∫", "distance": "150 –∫–º", "time": "1:45", "color": "red", "intermediate": [[55.3, 29.5]]},
    {"from": "–í–∏—Ç–µ–±—Å–∫", "to": "–ù–æ–≤–æ–ª—É–∫–æ–º–ª—å", "distance": "85 –∫–º", "time": "1:00", "color": "red", "intermediate": [[54.9, 29.5]]},
    {"from": "–ù–æ–≤–æ–ª—É–∫–æ–º–ª—å", "to": "–ú–æ–≥–∏–ª—ë–≤", "distance": "130 –∫–º", "time": "1:30", "color": "red", "intermediate": [[54.4, 30.0]]},
    {"from": "–ú–æ–≥–∏–ª—ë–≤", "to": "–ì–æ–º–µ–ª—å", "distance": "210 –∫–º", "time": "2:25", "color": "red", "intermediate": [[53.2, 30.5]]},
    {"from": "–ì–æ–º–µ–ª—å", "to": "–°–ª—É—Ü–∫", "distance": "200 –∫–º", "time": "2:15", "color": "red", "intermediate": [[52.8, 29.0]]},
    {"from": "–°–ª—É—Ü–∫", "to": "–ù–µ—Å–≤–∏–∂", "distance": "50 –∫–º", "time": "0:35", "color": "red", "intermediate": [[53.15, 27.4]]},
    {"from": "–ù–µ—Å–≤–∏–∂", "to": "–ü–∏–Ω—Å–∫", "distance": "180 –∫–º", "time": "2:00", "color": "red", "intermediate": [[53.0, 26.4]]},
    {"from": "–ü–∏–Ω—Å–∫", "to": "–ë—Ä–µ—Å—Ç", "distance": "140 –∫–º", "time": "1:35", "color": "red", "intermediate": [[52.2, 25.0]]},
]

# ============================================================================
# –†–ê–ó–î–ï–õ 3: –î–ê–ù–ù–´–ï - –õ–û–ö–ê–¶–ò–ò (60 –æ–±—ä–µ–∫—Ç–æ–≤)
# ============================================================================

LOCATIONS = [
    # –ë–ª–æ–∫ 1: –ó–µ–ª–µ–Ω—ã–π - "–ü—Ä–æ–π—Ç–∏—Å—å"
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–†—ã–Ω–æ–∫", "title": "–ö–æ–º–∞—Ä–æ–≤—Å–∫–∏–π —Ä—ã–Ω–æ–∫", "address": "–≥. –ú–∏–Ω—Å–∫, —É–ª. –í. –•–æ—Ä—É–∂–µ–π, 8", "coords": [53.9175, 27.5603], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–°–æ–±–æ—Ä", "title": "–ü–æ–∫—Ä–æ–≤—Å–∫–∏–π —Å–æ–±–æ—Ä", "address": "–≥. –ì—Ä–æ–¥–Ω–æ, —É–ª. –û–∂–µ—à–∫–æ, 23", "coords": [53.6822, 23.8278], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–°–∏–Ω–∞–≥–æ–≥–∞", "title": "–ë–æ–ª—å—à–∞—è —Ö–æ—Ä–∞–ª—å–Ω–∞—è —Å–∏–Ω–∞–≥–æ–≥–∞", "address": "–≥. –ì—Ä–æ–¥–Ω–æ, —É–ª. –ë–æ–ª—å—à–∞—è –¢—Ä–æ–∏—Ü–∫–∞—è, 59–ê", "coords": [53.6847, 23.8372], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ê–ø—Ç–µ–∫–∞", "title": "–ê–ø—Ç–µ–∫–∞-–º—É–∑–µ–π", "address": "–≥. –ì—Ä–æ–¥–Ω–æ, –ø–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, 4", "coords": [53.6783, 23.8289], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ú—É–∑–µ–π", "title": "–ú—É–∑–µ–π –≥–æ—Ä–æ–¥—Å–∫–æ–≥–æ –±—ã—Ç–∞", "address": "–≥. –ì—Ä–æ–¥–Ω–æ, —É–ª. –õ–µ—Ä–º–æ–Ω—Ç–æ–≤–∞, 25", "coords": [53.6817, 23.8322], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ü–ª–æ—â–∞–¥—å", "title": "–ü–ª–æ—â–∞–¥—å –°–ª–∞–≤—ã", "address": "–≥. –ú–æ–≥–∏–ª–µ–≤, –ø–ª. –°–ª–∞–≤—ã", "coords": [53.8967, 30.3306], "level": 2},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–£–ª–∏—Ü–∞", "title": "–ü–µ—à–µ—Ö–æ–¥–Ω–∞—è —É–ª–∏—Ü–∞ –õ–µ–Ω–∏–Ω—Å–∫–∞—è", "address": "–≥. –ú–æ–≥–∏–ª–µ–≤, —É–ª. –õ–µ–Ω–∏–Ω—Å–∫–∞—è", "coords": [53.8942, 30.3311], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–°–∫—É–ª—å–ø—Ç—É—Ä–∞", "title": "–ó–≤–µ–∑–¥–æ—á–µ—Ç", "address": "–≥. –ú–æ–≥–∏–ª–µ–≤, –ø–ª. –ó–≤–µ–∑–¥", "coords": [53.8989, 30.3356], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ü–∞—Ä–∫", "title": "–ü–∞—Ä–∫ –ü–æ–¥–Ω–∏–∫–æ–ª—å–µ", "address": "–≥. –ú–æ–≥–∏–ª–µ–≤, —É–ª. –ë–æ–ª—å—à–∞—è –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∞—è", "coords": [53.8861, 30.3433], "level": 2},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–¢–µ–∞—Ç—Ä", "title": "–ú–æ–≥–∏–ª–µ–≤—Å–∫–∏–π –¥—Ä–∞–º—Ç–µ–∞—Ç—Ä", "address": "–≥. –ú–æ–≥–∏–ª–µ–≤, —É–ª. –ü–µ—Ä–≤–æ–º–∞–π—Å–∫–∞—è, 7", "coords": [53.8961, 30.3383], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ü–∞—Ä–∫", "title": "–ü–∞—Ä–∫ –ì–æ—Ä—å–∫–æ–≥–æ", "address": "–≥. –ú–æ–≥–∏–ª–µ–≤, —É–ª. –ß–µ–ª—é—Å–∫–∏–Ω—Ü–µ–≤", "coords": [53.8889, 30.3233], "level": 2},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–°–∫—É–ª—å–ø—Ç—É—Ä–∞", "title": "–õ—ë–≤–∞ –∏–∑ –ú–æ–≥–∏–ª—ë–≤–∞", "address": "–≥. –ú–æ–≥–∏–ª–µ–≤, —É–ª. –ú–∏—Ä–æ–Ω–æ–≤–∞, 21", "coords": [53.9028, 30.3206], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–°–∫—É–ª—å–ø—Ç—É—Ä–∞", "title": "–î–∞–º–∞ —Å —Å–æ–±–∞—á–∫–æ–π", "address": "–≥. –ú–æ–≥–∏–ª–µ–≤, —É–ª. –ü–µ—Ä–≤–æ–º–∞–π—Å–∫–∞—è", "coords": [53.8956, 30.3383], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–°–∫—É–ª—å–ø—Ç—É—Ä–∞", "title": "–°—Ç–∞–Ω—Ü–∏–æ–Ω–Ω—ã–π —Å–º–æ—Ç—Ä–∏—Ç–µ–ª—å", "address": "–≥. –ú–æ–≥–∏–ª–µ–≤, –ø–ª. –ü—Ä–∏–≤–æ–∫–∑–∞–ª—å–Ω–∞—è", "coords": [53.8828, 30.3178], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–°–∫—É–ª—å–ø—Ç—É—Ä–∞", "title": "–§–æ–Ω–∞—Ä—â–∏–∫", "address": "–≥. –ë—Ä–µ—Å—Ç, —É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è", "coords": [52.0972, 23.7347], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ê–ª–ª–µ—è", "title": "–ê–ª–ª–µ—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã—Ö —Ñ–æ–Ω–∞—Ä–µ–π", "address": "–≥. –ë—Ä–µ—Å—Ç, —É–ª. –ì–æ–≥–æ–ª—è", "coords": [52.0958, 23.7367], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–î–≤–æ—Ä–∏–∫", "title": "–ö—Ä–∞—Å–Ω—ã–π –¥–≤–æ—Ä–∏–∫", "address": "–≥. –ú–∏–Ω—Å–∫, —É–ª. –†–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–∞—è, 7", "coords": [53.9044, 27.5556], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ì–∞–ª–µ—Ä–µ—è", "title": "–ì–∞–ª–µ—Ä–µ—è ¬´–é¬ª", "address": "–≥. –ú–∏–Ω—Å–∫, —É–ª. –û–∫—Ç—è–±—Ä—å—Å–∫–∞—è, 19", "coords": [53.8928, 27.5567], "level": 2},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ü–∞—Ä–∫", "title": "–ü–∞—Ä–∫ –∫–∞–º–Ω–µ–π", "address": "–≥. –ú–∏–Ω—Å–∫, —É–ª. –®—É–≥–∞–µ–≤–∞", "coords": [53.9367, 27.4658], "level": 2},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ü–∞—Ä–∫", "title": "–ü–∞—Ä–∫ –î—Ä–æ–∑–¥—ã", "address": "–≥. –ú–∏–Ω—Å–∫, –ø—Ä. –ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–π", "coords": [53.9353, 27.4933], "level": 2},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–¶–µ–Ω—Ç—Ä", "title": "–í–µ—Ä—Ö–Ω–∏–π –≥–æ—Ä–æ–¥", "address": "–≥. –ú–∏–Ω—Å–∫, –ø–ª. –°–≤–æ–±–æ–¥—ã", "coords": [53.9053, 27.5603], "level": 2},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ö–∞—Ñ–µ—Ç–µ—Ä–∏–π", "title": "–ë—É—Ñ–µ—Ç –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π", "address": "–≥. –ú–∏–Ω—Å–∫, –ø—Ä. –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, 23", "coords": [53.9111, 27.5531], "level": 3},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ú–∞–≥–∞–∑–∏–Ω", "title": "–ì–£–ú", "address": "–≥. –ú–∏–Ω—Å–∫, –ø—Ä. –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, 21", "coords": [53.9111, 27.5536], "level": 2},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ü–ª–æ—â–∞–¥—å", "title": "–ü–ª–æ—â–∞–¥—å –ü–æ–±–µ–¥—ã", "address": "–≥. –ú–∏–Ω—Å–∫, –ø–ª. –ü–æ–±–µ–¥—ã", "coords": [53.9100, 27.5783], "level": 2},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–í–æ—Ä–æ—Ç–∞", "title": "–í–æ—Ä–æ—Ç–∞ –ú–∏–Ω—Å–∫–∞", "address": "–≥. –ú–∏–Ω—Å–∫, —É–ª. –ö–∏—Ä–æ–≤–∞, 1", "coords": [53.9058, 27.5417], "level": 2},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ö–æ—Å—Ç–µ–ª", "title": "–ö—Ä–∞—Å–Ω—ã–π –∫–æ—Å—Ç–µ–ª", "address": "–≥. –ú–∏–Ω—Å–∫, —É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, 15", "coords": [53.9047, 27.5664], "level": 2},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ü–ª–æ—â–∞–¥—å", "title": "–ü–ª. –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏", "address": "–≥. –ú–∏–Ω—Å–∫, –ø–ª. –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏", "coords": [53.9086, 27.5556], "level": 2},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ü–∞—Ä–∫", "title": "–õ–æ—à–∏—Ü–∫–∏–π –ø–∞—Ä–∫", "address": "–≥. –ú–∏–Ω—Å–∫, –ø—Ä–æ–µ–∑–¥ –ß–∏–∂–µ–≤—Å–∫–∏—Ö, 10", "coords": [53.8758, 27.5072], "level": 2},
    {"block": "–ë–ª–æ–∫ 1: –ó–µ–ª—ë–Ω—ã–π ‚Äî ¬´–ü—Ä–æ–π—Ç–∏—Å—å¬ª", "type": "–ú—É–∑–µ–π", "title": "–ú—É–∑–µ–π ¬´5-–π —Ñ–æ—Ä—Ç¬ª", "address": "–≥. –ë—Ä–µ—Å—Ç, —É–ª. –°—Ç–∞—Ä–æ–¥–æ—Ä–æ–∂–Ω–∞—è, 99", "coords": [52.1156, 23.6689], "level": 2},

    # –ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π - "–ó–∞–π—Ç–∏"
    {"block": "–ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî ¬´–ó–∞–π—Ç–∏¬ª", "type": "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞", "title": "–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞", "address": "–≥. –ú–∏–Ω—Å–∫, –ø—Ä. –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, 116", "coords": [53.9317, 27.6533], "level": 2},
    {"block": "–ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî ¬´–ó–∞–π—Ç–∏¬ª", "type": "–ó–∞–º–æ–∫", "title": "–ó–∞–º–æ–∫ –ù–µ—Å–≤–∏–∂", "address": "–≥. –ù–µ—Å–≤–∏–∂, —É–ª. –õ–µ–Ω–∏–Ω—Å–∫–∞—è, 19", "coords": [53.3050, 26.6756], "level": 1},
    {"block": "–ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî ¬´–ó–∞–π—Ç–∏¬ª", "type": "–†–∞—Ç—É—à–∞", "title": "–†–∞—Ç—É—à–∞ –≤ –ù–µ—Å–≤–∏–∂–µ", "address": "–≥. –ù–µ—Å–≤–∏–∂, —É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, 3", "coords": [53.3092, 26.6833], "level": 3},
    {"block": "–ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî ¬´–ó–∞–π—Ç–∏¬ª", "type": "–í–æ—Ä–æ—Ç–∞", "title": "–°–ª—É—Ü–∫–∏–µ –≤–æ—Ä–æ—Ç–∞", "address": "–≥. –ù–µ—Å–≤–∏–∂, —É–ª. –°–ª—É—Ü–∫–∞—è, 8–ê", "coords": [53.3161, 26.6872], "level": 3},
    {"block": "–ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî ¬´–ó–∞–π—Ç–∏¬ª", "type": "–ö—Ä–µ–ø–æ—Å—Ç—å", "title": "–ë—Ä–µ—Å—Ç—Å–∫–∞—è –∫—Ä–µ–ø–æ—Å—Ç—å", "address": "–≥. –ë—Ä–µ—Å—Ç, —É–ª. –ì–µ—Ä–æ–µ–≤ –æ–±–æ—Ä–æ–Ω—ã –ë—Ä–µ—Å—Ç—Å–∫–æ–π –∫—Ä–µ–ø–æ—Å—Ç–∏, 60", "coords": [52.0856, 23.6594], "level": 1},
    {"block": "–ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî ¬´–ó–∞–π—Ç–∏¬ª", "type": "–ó–∞–º–æ–∫", "title": "–õ–∏–¥—Å–∫–∏–π –∑–∞–º–æ–∫", "address": "–≥. –õ–∏–¥–∞, —É–ª. –ó–∞–º–∫–æ–≤–∞—è, 1", "coords": [53.8853, 25.2925], "level": 2},
    {"block": "–ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî ¬´–ó–∞–π—Ç–∏¬ª", "type": "–ú—É–∑–µ–π", "title": "–ú—É–∑–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –±—ã—Ç–∞", "address": "–ú–∏–Ω—Å–∫–∏–π —Ä-–Ω, –¥. –û–∑–µ—Ä—Ü–æ", "coords": [53.8556, 27.4389], "level": 2},
    {"block": "–ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî ¬´–ó–∞–π—Ç–∏¬ª", "type": "–ü–∞—Ä–∫", "title": "–ü–∞—Ä–∫ –°—É–ª–∞", "address": "–°—Ç–æ–ª–±—Ü–æ–≤—Å–∫–∏–π —Ä-–Ω, –¥. –°—É–ª–∞, 14", "coords": [53.6856, 26.8533], "level": 2},
    {"block": "–ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî ¬´–ó–∞–π—Ç–∏¬ª", "type": "–ó–∞–º–æ–∫", "title": "–ú–∏—Ä—Å–∫–∏–π –∑–∞–º–æ–∫", "address": "–≥.–ø. –ú–∏—Ä, —É–ª. –ö—Ä–∞—Å–Ω–æ–∞—Ä–º–µ–π—Å–∫–∞—è, 2", "coords": [53.4542, 26.4733], "level": 1},
    {"block": "–ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî ¬´–ó–∞–π—Ç–∏¬ª", "type": "–ú—É–∑–µ–π", "title": "–î—É–¥—É—Ç–∫–∏", "address": "–ü—É—Ö–æ–≤–∏—á—Å–∫–∏–π —Ä-–Ω, –¥. –ü—Ç–∏—á—å", "coords": [53.5189, 27.9883], "level": 2},
    {"block": "–ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî ¬´–ó–∞–π—Ç–∏¬ª", "type": "–ü–∞—Ä–∫", "title": "–ë–µ–ª–æ–≤–µ–∂—Å–∫–∞—è –ø—É—â–∞", "address": "–ö–∞–º–µ–Ω–µ—Ü–∫–∏–π —Ä-–Ω, –∞–≥. –ö–∞–º–µ–Ω—é–∫–∏", "coords": [52.5958, 23.8544], "level": 1},
    {"block": "–ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî ¬´–ó–∞–π—Ç–∏¬ª", "type": "–î–≤–æ—Ä–µ—Ü", "title": "–°–≤—è—Ç—Å–∫–∏–π –¥–≤–æ—Ä–µ—Ü", "address": "–ì—Ä–æ–¥–Ω–µ–Ω—Å–∫–∏–π —Ä-–Ω, –¥. –°–≤—è—Ç—Å–∫", "coords": [53.7128, 23.7561], "level": 2},
    {"block": "–ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî ¬´–ó–∞–π—Ç–∏¬ª", "type": "–ú—É–∑–µ–π", "title": "–ú—É–∑–µ–π –ø–æ–µ–∑–¥–æ–≤", "address": "–≥. –ë—Ä–µ—Å—Ç, –ø—Ä. –ú–∞—à–µ—Ä–æ–≤–∞, 2", "coords": [52.0922, 23.7453], "level": 2},
    {"block": "–ë–ª–æ–∫ 2: –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî ¬´–ó–∞–π—Ç–∏¬ª", "type": "–¢–µ–∞—Ç—Ä", "title": "–¢–µ–∞—Ç—Ä –∫—É–∫–æ–ª", "address": "–≥. –ë—Ä–µ—Å—Ç, —É–ª. –õ–µ–Ω–∏–Ω–∞, 56", "coords": [52.0994, 23.7333], "level": 3},

    # –ë–ª–æ–∫ 3: –§–∏–æ–ª–µ—Ç–æ–≤—ã–π - "–≠–∫—Å–∫—É—Ä—Å–∏–∏"
    {"block": "–ë–ª–æ–∫ 3: –§–∏–æ–ª–µ—Ç–æ–≤—ã–π ‚Äî ¬´–≠–∫—Å–∫—É—Ä—Å–∏–∏¬ª", "type": "–§–∞–±—Ä–∏–∫–∞", "title": "–§–∞–±—Ä–∏–∫–∞ –ö–æ–º–º—É–Ω–∞—Ä–∫–∞", "address": "–≥. –ú–∏–Ω—Å–∫, —É–ª. –ê—Ä–∞–Ω—Å–∫–∞—è, 18", "coords": [53.8900, 27.5444], "level": 2},
    {"block": "–ë–ª–æ–∫ 3: –§–∏–æ–ª–µ—Ç–æ–≤—ã–π ‚Äî ¬´–≠–∫—Å–∫—É—Ä—Å–∏–∏¬ª", "type": "–ó–∞–≤–æ–¥", "title": "–ó–∞–≤–æ–¥ –ê–ª–∏–≤–∞—Ä–∏—è", "address": "–≥. –ú–∏–Ω—Å–∫, —É–ª. –ö–∏—Å–µ–ª—ë–≤–∞, 30", "coords": [53.8942, 27.5556], "level": 2},
    {"block": "–ë–ª–æ–∫ 3: –§–∏–æ–ª–µ—Ç–æ–≤—ã–π ‚Äî ¬´–≠–∫—Å–∫—É—Ä—Å–∏–∏¬ª", "type": "–ó–∞–≤–æ–¥", "title": "–ó–∞–≤–æ–¥ –ë–µ–ª–ê–ó", "address": "–≥. –ñ–æ–¥–∏–Ω–æ, —É–ª. 40 –ª–µ—Ç –û–∫—Ç—è–±—Ä—è, 4", "coords": [54.0961, 28.3144], "level": 2},

    # –ë–ª–æ–∫ 4: –°–∏–Ω–∏–π - "SPA"
    {"block": "–ë–ª–æ–∫ 4: –°–∏–Ω–∏–π ‚Äî ¬´SPA¬ª", "type": "SPA", "title": "Spa Riviera", "address": "–≥. –ú–∏–Ω—Å–∫, –ø—Ä. –ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–π, 110", "coords": [53.9331, 27.5103], "level": 2},
    {"block": "–ë–ª–æ–∫ 4: –°–∏–Ω–∏–π ‚Äî ¬´SPA¬ª", "type": "–ë–∞–∑–∞", "title": "–ë–∞–∑–∞ –°—è–±—Ä—ã", "address": "–ú–∏–Ω—Å–∫–∏–π —Ä-–Ω, –∞–≥. –°—ë–º–∫–æ–≤–æ", "coords": [54.0078, 27.2942], "level": 2},

    # –ë–ª–æ–∫ 5: –°–µ—Ä—ã–π - "–ó–∞–±—Ä–æ—à–∫–∏"
    {"block": "–ë–ª–æ–∫ 5: –°–µ—Ä—ã–π ‚Äî ¬´–ó–∞–±—Ä–æ—à–∫–∏¬ª", "type": "–õ–∞–≥–µ—Ä—å", "title": "–õ–∞–≥–µ—Ä—å –î–æ–º–∞–Ω–æ–≤–æ", "address": "–ú–æ–ª–æ–¥–µ—á–Ω–µ–Ω—Å–∫–∏–π —Ä-–Ω, –¥. –î–æ–º–∞–Ω–æ–≤–æ", "coords": [54.2856, 26.6853], "level": 2},
    {"block": "–ë–ª–æ–∫ 5: –°–µ—Ä—ã–π ‚Äî ¬´–ó–∞–±—Ä–æ—à–∫–∏¬ª", "type": "–°–∞–Ω–∞—Ç–æ—Ä–∏–π", "title": "–°–∞–Ω–∞—Ç–æ—Ä–∏–π –õ–µ—Å–Ω–æ–µ", "address": "–ú–∏–Ω—Å–∫–∞—è –æ–±–ª.", "coords": [54.1458, 27.8233], "level": 2},
    {"block": "–ë–ª–æ–∫ 5: –°–µ—Ä—ã–π ‚Äî ¬´–ó–∞–±—Ä–æ—à–∫–∏¬ª", "type": "–£—Å–∞–¥—å–±–∞", "title": "–î–æ–º –∏–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—è", "address": "–ú–∏–Ω—Å–∫–∞—è –æ–±–ª.", "coords": [53.8458, 27.4567], "level": 2},
    {"block": "–ë–ª–æ–∫ 5: –°–µ—Ä—ã–π ‚Äî ¬´–ó–∞–±—Ä–æ—à–∫–∏¬ª", "type": "–£—Å–∞–¥—å–±–∞", "title": "–£—Å–∞–¥—å–±–∞ –ñ–µ–ª—É–¥–æ–∫", "address": "–©—É—á–∏–Ω—Å–∫–∏–π —Ä-–Ω, –¥. –ñ–µ–ª—É–¥–æ–∫", "coords": [53.7853, 24.8533], "level": 2},
    {"block": "–ë–ª–æ–∫ 5: –°–µ—Ä—ã–π ‚Äî ¬´–ó–∞–±—Ä–æ—à–∫–∏¬ª", "type": "–£—Å–∞–¥—å–±–∞", "title": "–£—Å–∞–¥—å–±–∞ –ñ–µ–º—ã—Å–ª–∞–≤–ª—å", "address": "–ò–≤—å–µ–≤—Å–∫–∏–π —Ä-–Ω, –¥. –ñ–µ–º—ã—Å–ª–∞–≤–ª—å", "coords": [53.8122, 25.4853], "level": 2},
    {"block": "–ë–ª–æ–∫ 5: –°–µ—Ä—ã–π ‚Äî ¬´–ó–∞–±—Ä–æ—à–∫–∏¬ª", "type": "–ê—ç—Ä–æ–≤–æ–∫–∑–∞–ª", "title": "–°—Ç–∞—Ä—ã–π –∞—ç—Ä–æ–ø–æ—Ä—Ç", "address": "–≥. –ì—Ä–æ–¥–Ω–æ", "coords": [53.6542, 23.8528], "level": 2},
    {"block": "–ë–ª–æ–∫ 5: –°–µ—Ä—ã–π ‚Äî ¬´–ó–∞–±—Ä–æ—à–∫–∏¬ª", "type": "–õ–∞–≥–µ—Ä—å", "title": "–õ–∞–≥–µ—Ä—å –ú–∏—Ä", "address": "–ë–∞—Ä–∞–Ω–æ–≤–∏—á—Å–∫–∏–π —Ä-–Ω", "coords": [52.9756, 26.0233], "level": 2},
    {"block": "–ë–ª–æ–∫ 5: –°–µ—Ä—ã–π ‚Äî ¬´–ó–∞–±—Ä–æ—à–∫–∏¬ª", "type": "–ó–æ–Ω–∞", "title": "–ó–æ–Ω–∞ –æ—Ç—Å–µ–ª–µ–Ω–∏—è", "address": "–ì–æ–º–µ–ª—å—Å–∫–∞—è –æ–±–ª., –ü–æ–ª–µ—Å—Å–∫–∏–π –ì–†–≠–ó", "coords": [51.8753, 29.6233], "level": 2},
    {"block": "–ë–ª–æ–∫ 5: –°–µ—Ä—ã–π ‚Äî ¬´–ó–∞–±—Ä–æ—à–∫–∏¬ª", "type": "–ü–æ—Å—ë–ª–æ–∫", "title": "–ì–æ—Ä–æ–¥ –°–æ–ª–Ω–µ—á–Ω—ã–π", "address": "–ë—Ä–∞–≥–∏–Ω—Å–∫–∏–π —Ä-–Ω", "coords": [51.9453, 29.9233], "level": 2},
    {"block": "–ë–ª–æ–∫ 5: –°–µ—Ä—ã–π ‚Äî ¬´–ó–∞–±—Ä–æ—à–∫–∏¬ª", "type": "–ü–æ–µ–∑–¥–∞", "title": "–ö–ª–∞–¥–±–∏—â–µ –ø–æ–µ–∑–¥–æ–≤", "address": "–•–æ–π–Ω–∏–∫—Å–∫–∏–π —Ä-–Ω, —Å—Ç. –ü–æ—Å—É–¥–æ–≤–æ", "coords": [51.8853, 30.2533], "level": 2},
    {"block": "–ë–ª–æ–∫ 5: –°–µ—Ä—ã–π ‚Äî ¬´–ó–∞–±—Ä–æ—à–∫–∏¬ª", "type": "–¢–µ—Ö–Ω–∏–∫–∞", "title": "–ö–æ–º–±–∞–π–Ω—ã –ß–ó–û", "address": "–ù–∞—Ä–æ–≤–ª—è–Ω—Å–∫–∏–π —Ä-–Ω, –¥. –ó–∞–ª–µ—Å—å–µ", "coords": [51.8353, 29.8533], "level": 2},
    {"block": "–ë–ª–æ–∫ 5: –°–µ—Ä—ã–π ‚Äî ¬´–ó–∞–±—Ä–æ—à–∫–∏¬ª", "type": "–î–µ—Ä–µ–≤–Ω—è", "title": "–î–µ—Ä–µ–≤–Ω—è –î—ë—Ä–Ω–æ–≤–∏—á–∏", "address": "–ù–∞—Ä–æ–≤–ª—è–Ω—Å–∫–∏–π —Ä-–Ω, –¥. –î—ë—Ä–Ω–æ–≤–∏—á–∏", "coords": [51.7553, 29.8533], "level": 2},
    {"block": "–ë–ª–æ–∫ 5: –°–µ—Ä—ã–π ‚Äî ¬´–ó–∞–±—Ä–æ—à–∫–∏¬ª", "type": "–î–µ—Ä–µ–≤–Ω—è", "title": "–î–æ–≤–ª—è–¥—ã", "address": "–ù–∞—Ä–æ–≤–ª—è–Ω—Å–∫–∏–π —Ä-–Ω, –¥. –î–æ–≤–ª—è–¥—ã", "coords": [51.7253, 29.7533], "level": 2},
]

# ============================================================================
# –†–ê–ó–î–ï–õ 4: –§–£–ù–ö–¶–ò–ò –ì–ï–ù–ï–†–ê–¶–ò–ò HTML
# ============================================================================

def fix_path(from_city, to_city, intermediate):
    """
    –§–æ—Ä–º–∏—Ä—É–µ—Ç –º–∞—Å—Å–∏–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –¥–ª—è –ø–æ–ª–∏–ª–∏–Ω–∏–∏ —Å —É—á–µ—Ç–æ–º –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ç–æ—á–µ–∫.
    """
    path = []
    
    # –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é —Ç–æ—á–∫—É
    if from_city in CITIES:
        path.append([CITIES[from_city]["lat"], CITIES[from_city]["lon"]])
    
    # –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ç–æ—á–∫–∏
    for point in intermediate:
        path.append(point)
    
    # –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É
    if to_city in CITIES:
        path.append([CITIES[to_city]["lat"], CITIES[to_city]["lon"]])
    
    return path


def get_marker_color(block):
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ü–≤–µ—Ç –º–∞—Ä–∫–µ—Ä–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –±–ª–æ–∫–∞."""
    if "–ó–µ–ª—ë–Ω—ã–π" in block or "–ó–µ–ª–µ–Ω—ã–π" in block:
        return "#28a745"  # –ó–µ–ª–µ–Ω—ã–π
    elif "–û—Ä–∞–Ω–∂–µ–≤—ã–π" in block:
        return "#fd7e14"  # –û—Ä–∞–Ω–∂–µ–≤—ã–π
    elif "–§–∏–æ–ª–µ—Ç–æ–≤—ã–π" in block:
        return "#6f42c1"  # –§–∏–æ–ª–µ—Ç–æ–≤—ã–π
    elif "–°–∏–Ω–∏–π" in block:
        return "#007bff"  # –°–∏–Ω–∏–π
    elif "–°–µ—Ä—ã–π" in block or "–ó–∞–±—Ä–æ—à–∫–∏" in block:
        return "#6c757d"  # –°–µ—Ä—ã–π
    return "#3388ff"  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∏–Ω–∏–π


def get_level_zoom(level):
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑—É–º –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è."""
    zoom_levels = {1: 7, 2: 10, 3: 13}
    return zoom_levels.get(level, 10)


def generate_html():
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π HTML-–∫–æ–¥ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç—ã."""
    
    # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è JSON
    cities_json = json.dumps(CITIES, ensure_ascii=False, indent=8)
    radial_routes_json = json.dumps(RADIAL_ROUTES, ensure_ascii=False, indent=8)
    circular_routes_json = json.dumps(CIRCULAR_ROUTES, ensure_ascii=False, indent=8)
    locations_json = json.dumps(LOCATIONS, ensure_ascii=False, indent=8)
    
    html = f'''<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ë–µ–ª–∞—Ä—É—Å–∏</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
          crossorigin=""/>
    
    <style>
        * {{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }}
        
        body {{
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
        }}
        
        #map {{
            height: 100vh;
            width: 100vw;
            z-index: 1;
        }}
        
        /* –°—Ç–∏–ª–∏ –º–∞—Ä–∫–µ—Ä–æ–≤ –≥–æ—Ä–æ–¥–æ–≤ */
        .city-marker {{
            background: white;
            border: 2px solid #333;
            border-radius: 50%;
            width: 10px;
            height: 10px;
        }}
        
        .city-label {{
            font-weight: bold;
            color: #000;
            font-size: 12px;
            text-shadow: 1px 1px 2px white, -1px -1px 2px white, 1px -1px 2px white, -1px 1px 2px white;
        }}
        
        /* –°—Ç–∏–ª–∏ –ª–∏–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç–æ–≤ */
        .route-line {{
            weight: 3;
            opacity: 0.9;
            smoothFactor: 1;
        }}
        
        .route-label {{
            font-weight: bold;
            font-size: 11px;
            text-shadow: 1px 1px 2px white, -1px -1px 2px white, 1px -1px 2px white, -1px 1px 2px white;
            cursor: pointer;
            transition: opacity 0.3s;
        }}
        
        /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ—è–º–∏ */
        .layer-control {{}}
        
        .layer-control .toggle-btn {{
            width: 36px;
            height: 36px;
            background: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            font-size: 20px;
        }}
        
        .layer-control .toggle-btn:hover {{
            background: #f5f5f5;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }}
        
        .layer-control .panel {{
            position: absolute;
            top: 40px;
            right: 0;
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            display: none;
            min-width: 180px;
        }}
        
        .layer-control .panel.visible {{
            display: block;
            animation: fadeIn 0.2s ease;
        }}
        
        @keyframes fadeIn {{
            from {{ opacity: 0; transform: translateY(-10px); }}
            to {{ opacity: 1; transform: translateY(0); }}
        }}
        
        .layer-control .panel label {{
            display: flex;
            align-items: center;
            margin: 10px 0;
            cursor: pointer;
            font-size: 14px;
        }}
        
        .layer-control .panel input[type="checkbox"] {{
            margin-right: 10px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }}
        
        /* –ö–Ω–æ–ø–∫–∞ –õ–æ–∫–∞—Ü–∏–∏ (Glassmorphism) */
        .locations-btn {{
            position: fixed;
            top: 15px;
            right: 200px;
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            z-index: 1000;
            
            /* Glassmorphism —Å—Ç–∏–ª—å */
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12),
                        inset 0 1px 0 rgba(255, 255, 255, 0.3);
            
            transition: all 0.3s ease;
            color: #333;
        }}
        
        .locations-btn:hover {{
            background: rgba(255, 255, 255, 0.75);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.18),
                        inset 0 1px 0 rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
        }}
        
        .locations-btn.active {{
            background: rgba(40, 167, 69, 0.7);
            color: white;
            border-color: rgba(40, 167, 69, 0.5);
        }}
        
        /* Popup —Å—Ç–∏–ª–∏ */
        .custom-popup .leaflet-popup-content-wrapper {{
            border-radius: 8px;
            padding: 0;
        }}
        
        .custom-popup .leaflet-popup-content {{
            margin: 12px 15px;
            line-height: 1.5;
        }}
        
        .popup-title {{
            font-weight: 500;
            font-size: 14px;
            margin-bottom: 6px;
        }}
        
        .popup-divider {{
            height: 1px;
            background: #ddd;
            margin: 8px 0;
        }}
        
        .popup-address {{
            font-weight: 300;
            font-size: 11px;
            color: #777;
        }}
        
        .popup-type {{
            font-size: 11px;
            color: #888;
            margin-bottom: 4px;
        }}
        
        /* –ú–∞—Ä–∫–µ—Ä—ã –ª–æ–∫–∞—Ü–∏–π */
        .location-marker {{
            display: flex;
            align-items: center;
        }}
        
        .location-label {{
            font-family: 'Inter', sans-serif;
            font-size: 10px;
            color: #333;
            background: rgba(255, 255, 255, 0.85);
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 8px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.15);
        }}
        
        /* –õ–µ–≥–µ–Ω–¥–∞ */
        .legend {{
            position: fixed;
            bottom: 30px;
            left: 15px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 1000;
            font-size: 12px;
        }}
        
        .legend h4 {{
            margin-bottom: 10px;
            font-size: 13px;
        }}
        
        .legend-item {{
            display: flex;
            align-items: center;
            margin: 6px 0;
        }}
        
        .legend-color {{
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 8px;
        }}
        
        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫ */
        .info-block {{
            position: fixed;
            bottom: 30px;
            right: 15px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 1000;
            font-size: 12px;
            max-width: 250px;
        }}
        
        .info-block h4 {{
            margin-bottom: 8px;
        }}
    </style>
</head>
<body>
    <div id="map"></div>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –õ–æ–∫–∞—Ü–∏–∏ -->
    <button class="locations-btn" id="locationsBtn">
        –õ–æ–∫–∞—Ü–∏–∏
    </button>
    
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
            crossorigin=""></script>
    
    <script>
        // =========================================================================
        // –î–ê–ù–ù–´–ï –ò–ó PYTHON
        // =========================================================================
        
        const CITIES = {cities_json};
        
        const RADIAL_ROUTES = {radial_routes_json};
        
        const CIRCULAR_ROUTES = {circular_routes_json};
        
        const LOCATIONS = {locations_json};
        
        // =========================================================================
        // –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
        // =========================================================================
        
        const CONFIG = {{
            center: [53.7, 27.5],
            zoom: 7,
            zoomLevels: {{1: 7, 2: 10, 3: 13}}
        }};
        
        const COLORS = {{
            radial: '#3388ff',
            circular: '#ff3333',
            special: '#ff69b4'
        }};
        
        const MARKER_COLORS = {{
            '–ó–µ–ª—ë–Ω—ã–π': '#28a745',
            '–ó–µ–ª–µ–Ω—ã–π': '#28a745',
            '–û—Ä–∞–Ω–∂–µ–≤—ã–π': '#fd7e14',
            '–§–∏–æ–ª–µ—Ç–æ–≤—ã–π': '#6f42c1',
            '–°–∏–Ω–∏–π': '#007bff',
            '–°–µ—Ä—ã–π': '#6c757d'
        }};
        
        // =========================================================================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ö–ê–†–¢–´
        // =========================================================================
        
        const map = L.map('map', {{
            zoomControl: true
        }}).setView(CONFIG.center, CONFIG.zoom);
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ç–∞–π–ª—ã CartoDB Light
        L.tileLayer('https://{{s}}.basemaps.cartocdn.com/light_all/{{z}}/{{x}}/{{y}}{{r}}.png', {{
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 19
        }}).addTo(map);
        
        // =========================================================================
        // –•–†–ê–ù–ò–õ–ò–©–ê –î–ê–ù–ù–´–•
        // =========================================================================
        
        const allLines = {{
            radial: [],
            circle: [],
            all: []
        }};
        
        const allLocations = [];
        let locationLayer = L.layerGroup();  // –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –Ω–∞ –∫–∞—Ä—Ç—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        let routesLayer = L.layerGroup().addTo(map);
        
        // Snapshot –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ª–∏–Ω–∏–π
        let snapshot = {{}};
        let locationsMode = false;
        
        // =========================================================================
        // –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
        // =========================================================================
        
        // –§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø—É—Ç–∏
        function fixPath(fromCity, toCity, intermediate) {{
            const path = [];
            
            // –ù–∞—á–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞
            if (CITIES[fromCity]) {{
                path.push([CITIES[fromCity].lat, CITIES[fromCity].lon]);
            }}
            
            // –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ç–æ—á–∫–∏
            for (const point of intermediate) {{
                path.push(point);
            }}
            
            // –ö–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞
            if (CITIES[toCity]) {{
                path.push([CITIES[toCity].lat, CITIES[toCity].lon]);
            }}
            
            return path;
        }}
        
        // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ –º–∞—Ä–∫–µ—Ä–∞
        function getMarkerColor(block) {{
            if (block.includes('–ó–µ–ª—ë–Ω—ã–π') || block.includes('–ó–µ–ª–µ–Ω—ã–π')) return '#28a745';
            if (block.includes('–û—Ä–∞–Ω–∂–µ–≤—ã–π')) return '#fd7e14';
            if (block.includes('–§–∏–æ–ª–µ—Ç–æ–≤—ã–π')) return '#6f42c1';
            if (block.includes('–°–∏–Ω–∏–π')) return '#007bff';
            if (block.includes('–°–µ—Ä—ã–π')) return '#6c757d';
            return '#3388ff';
        }}
        
        // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Ä–æ–≥–∞ –∑—É–º–∞ –¥–ª—è —É—Ä–æ–≤–Ω—è
        function getZoomForLevel(level) {{
            return CONFIG.zoomLevels[level] || 10;
        }}
        
        // =========================================================================
        // –î–û–ë–ê–í–õ–ï–ù–ò–ï –ì–û–†–û–î–û–í
        // =========================================================================
        
        for (const [name, coords] of Object.entries(CITIES)) {{
            // –ú–∞—Ä–∫–µ—Ä –≥–æ—Ä–æ–¥–∞
            const marker = L.circleMarker([coords.lat, coords.lon], {{
                radius: 4,
                fillColor: '#ffffff',
                color: '#000000',
                weight: 2,
                opacity: 1,
                fillOpacity: 1
            }}).addTo(map);
            
            // –ü–æ–¥–ø–∏—Å—å –≥–æ—Ä–æ–¥–∞ —Å offset
            const offset = coords.offset || [0, -12];
            const label = L.marker([coords.lat, coords.lon], {{
                icon: L.divIcon({{
                    className: 'city-label-container',
                    html: `<span class="city-label" style="margin-left: ${{offset[0]}}px; margin-top: ${{offset[1]}}px;">${{name}}</span>`,
                    iconSize: [100, 20],
                    iconAnchor: [50, 10]
                }})
            }}).addTo(map);
        }}
        
        // =========================================================================
        // –§–£–ù–ö–¶–ò–Ø –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –õ–ò–ù–ò–ò (–∏–∑ belarus_map_real.py)
        // =========================================================================
        
        function toggleLine(lineData, forceState) {{
            const polyline = lineData.polyline;
            const labelElement = lineData.label.getElement();
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            const isCurrentlyHidden = forceState !== undefined ? !forceState : polyline.options.opacity > 0.2;
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—É—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
            const newOpacity = isCurrentlyHidden ? 0.1 : 0.9;
            polyline.setStyle({{ opacity: newOpacity, weight: isCurrentlyHidden ? 2 : 3 }});
            
            // –°–∫—Ä—ã–≤–∞–µ–º/–ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ—Ç–∫—É –≤–º–µ—Å—Ç–µ —Å –ª–∏–Ω–∏–µ–π
            if (labelElement) {{
                labelElement.style.opacity = isCurrentlyHidden ? '0.1' : '1';
            }}
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –¥–∞–Ω–Ω—ã—Ö –ª–∏–Ω–∏–∏
            lineData.isHidden = isCurrentlyHidden;
        }}
        
        // =========================================================================
        // –§–£–ù–ö–¶–ò–Ø –î–û–ë–ê–í–õ–ï–ù–ò–Ø –î–û–†–û–ì–ò
        // =========================================================================
        
        function addRoad(route, isRadial = true) {{
            const color = route.color === 'deeppink' ? COLORS.special : 
                          (isRadial ? COLORS.radial : COLORS.circular);
            
            const path = fixPath(route.from, route.to, route.intermediate || []);
            
            // –°–æ–∑–¥–∞–µ–º –ø–æ–ª–∏–ª–∏–Ω–∏—é
            const polyline = L.polyline(path, {{
                color: color,
                weight: 3,
                opacity: 0.9,
                smoothFactor: 1
            }});
            
            // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∫—É –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ
            const midIndex = Math.floor(path.length / 2);
            const midPoint = path[midIndex];
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–ª—è –º–µ—Ç–∫–∏
            const labelId = 'lbl_' + Math.random().toString(36).substr(2, 9);
            
            const label = L.marker(midPoint, {{
                icon: L.divIcon({{
                    className: 'route-label',
                    html: `<span id="${{labelId}}" style="color: ${{color}};">${{route.distance}}, ${{route.time}}</span>`,
                    iconSize: [80, 16],
                    iconAnchor: [40, 8]
                }})
            }});
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            const roadData = {{
                polyline,
                label,
                labelId,
                color,
                route,
                isRadial,
                isHidden: false
            }};
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –ª–∏–Ω–∏—é
            polyline.on('click', function() {{
                if (locationsMode) return; // –ë–ª–æ–∫–∏—Ä—É–µ–º –≤ —Ä–µ–∂–∏–º–µ –ª–æ–∫–∞—Ü–∏–π
                toggleLine(roadData);
            }});
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞ –∫–∞—Ä—Ç—É
            polyline.addTo(routesLayer);
            label.addTo(routesLayer);
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –º–µ—Ç–∫—É (–ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç—É)
            setTimeout(() => {{
                const labelElement = document.getElementById(labelId);
                if (labelElement) {{
                    labelElement.style.cursor = 'pointer';
                    labelElement.onclick = function(e) {{
                        e.stopPropagation();
                        if (locationsMode) return;
                        toggleLine(roadData);
                    }};
                }}
            }}, 100);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –º–∞—Å—Å–∏–≤—ã
            allLines.all.push(roadData);
            if (isRadial) {{
                allLines.radial.push(roadData);
            }} else {{
                allLines.circle.push(roadData);
            }}
            
            return roadData;
        }}
        
        // =========================================================================
        // –î–û–ë–ê–í–õ–ï–ù–ò–ï –ú–ê–†–®–†–£–¢–û–í
        // =========================================================================
        
        // –†–∞–¥–∏–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
        RADIAL_ROUTES.forEach(route => {{
            addRoad(route, true);
        }});
        
        // –ö–æ–ª—å—Ü–µ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
        CIRCULAR_ROUTES.forEach(route => {{
            addRoad(route, false);
        }});
        
        // =========================================================================
        // –ö–ù–û–ü–ö–ê –£–ü–†–ê–í–õ–ï–ù–ò–Ø –°–õ–û–Ø–ú–ò
        // =========================================================================
        
        const LayerControl = L.Control.extend({{
            options: {{
                position: 'topright'
            }},
            
            onAdd: function() {{
                const container = L.DomUtil.create('div', 'layer-control');
                
                // –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
                const toggleBtn = L.DomUtil.create('button', 'toggle-btn', container);
                toggleBtn.innerHTML = 'üìè';
                toggleBtn.title = '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ—è–º–∏';
                
                // –ü–∞–Ω–µ–ª—å —Å —á–µ–∫–±–æ–∫—Å–∞–º–∏
                const panel = L.DomUtil.create('div', 'panel', container);
                panel.innerHTML = `
                    <label>
                        <input type="checkbox" id="radialCheck" checked>
                        –†–∞–¥–∏–∞–ª—å–Ω—ã–µ
                    </label>
                    <label>
                        <input type="checkbox" id="circleCheck" checked>
                        –ö–æ–ª—å—Ü–µ–≤—ã–µ
                    </label>
                `;
                
                // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–∞–Ω–µ–ª–∏
                toggleBtn.addEventListener('click', function(e) {{
                    e.stopPropagation();
                    panel.classList.toggle('visible');
                }});
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –ø–∞–Ω–µ–ª–∏
                document.addEventListener('click', function(e) {{
                    if (!container.contains(e.target)) {{
                        panel.classList.remove('visible');
                    }}
                }});
                
                // –ò–∑–æ–ª—è—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –∫–∞—Ä—Ç—ã
                L.DomEvent.disableClickPropagation(container);
                
                return container;
            }}
        }});
        
        map.addControl(new LayerControl());
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —á–µ–∫–±–æ–∫—Å–æ–≤
        document.getElementById('radialCheck').addEventListener('change', function(e) {{
            allLines.radial.forEach(lineData => {{
                toggleLine(lineData, e.target.checked);
            }});
        }});
        
        document.getElementById('circleCheck').addEventListener('change', function(e) {{
            allLines.circle.forEach(lineData => {{
                toggleLine(lineData, e.target.checked);
            }});
        }});
        
        // =========================================================================
        // –°–û–ó–î–ê–ù–ò–ï –ú–ê–†–ö–ï–†–û–í –õ–û–ö–ê–¶–ò–ô
        // =========================================================================
        
        function createLocationMarker(location) {{
            const color = getMarkerColor(location.block);
            
            // –°–æ–∑–¥–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–π –º–∞—Ä–∫–µ—Ä
            const icon = L.divIcon({{
                className: 'custom-marker',
                html: `<div style="
                    width: 12px;
                    height: 12px;
                    background: ${{color}};
                    border: 2px solid white;
                    border-radius: 50%;
                    box-shadow:0 2px 6px rgba(0,0,0,0.3);
                "></div>`,
                iconSize: [16, 16],
                iconAnchor: [8, 8]
            }});
            
            const marker = L.marker([location.coords[0], location.coords[1]], {{ icon }});
            
            // Popup —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
            const popupContent = `
                <div class="popup-type">${{location.type}}</div>
                <div class="popup-title">${{location.title}}</div>
                <div class="popup-divider"></div>
                <div class="popup-address">${{location.address}}</div>
            `;
            
            marker.bindPopup(popupContent, {{
                className: 'custom-popup',
                maxWidth: 250
            }});
            
            // –°–ø–µ—Ü—Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –∑–∞–º–∫–∞ –ù–µ—Å–≤–∏–∂
            if (location.title === '–ó–∞–º–æ–∫ –ù–µ—Å–≤–∏–∂') {{
                marker.on('click', function() {{
                    map.flyTo([location.coords[0], location.coords[1]], 14, {{
                        duration: 1.5
                    }});
                }});
            }}
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –º–∞—Ä–∫–µ—Ä–∞
            marker.locationData = location;
            
            allLocations.push(marker);
        }}
        
        // –°–æ–∑–¥–∞–µ–º –≤—Å–µ –º–∞—Ä–∫–µ—Ä—ã –ª–æ–∫–∞—Ü–∏–π (–Ω–æ –ù–ï –¥–æ–±–∞–≤–ª—è–µ–º –Ω–∞ –∫–∞—Ä—Ç—É)
        LOCATIONS.forEach(location => {{
            createLocationMarker(location);
        }});
        
        // =========================================================================
        // –§–£–ù–ö–¶–ò–Ø –û–ë–ù–û–í–õ–ï–ù–ò–Ø –í–ò–î–ò–ú–û–°–¢–ò –õ–û–ö–ê–¶–ò–ô –ü–û –ó–£–ú–£
        // (–†–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û –∫–æ–≥–¥–∞ locationsMode = true)
        // =========================================================================
        
        function updateLocationsVisibility() {{
            // –ï—Å–ª–∏ —Ä–µ–∂–∏–º –ª–æ–∫–∞—Ü–∏–π –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω - –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
            if (!locationsMode) {{
                return;
            }}
            
            const currentZoom = map.getZoom();
            
            allLocations.forEach(marker => {{
                const level = marker.locationData.level;
                const minZoom = getZoomForLevel(level);
                
                if (currentZoom >= minZoom) {{
                    if (!locationLayer.hasLayer(marker)) {{
                        marker.addTo(locationLayer);
                    }}
                }} else {{
                    if (locationLayer.hasLayer(marker)) {{
                        locationLayer.removeLayer(marker);
                    }}
                }}
            }});
        }}
        
        // –°–ª—É—à–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑—É–º–∞
        map.on('zoomend', updateLocationsVisibility);
        
        // =========================================================================
        // –†–ï–ñ–ò–ú "–õ–û–ö–ê–¶–ò–ò" - SNAPSHOT –õ–û–ì–ò–ö–ê
        // =========================================================================
        
        function saveSnapshot() {{
            snapshot = {{}};
            allLines.all.forEach((lineData, index) => {{
                snapshot[index] = {{
                    opacity: lineData.polyline.options.opacity,
                    isHidden: lineData.isHidden,
                    labelOpacity: lineData.label.getElement() ? lineData.label.getElement().style.opacity : '1'
                }};
            }});
        }}
        
        function restoreSnapshot() {{
            allLines.all.forEach((lineData, index) => {{
                if (snapshot[index]) {{
                    const state = snapshot[index];
                    lineData.polyline.setStyle({{ opacity: state.opacity }});
                    lineData.isHidden = state.isHidden;
                    
                    const labelElement = lineData.label.getElement();
                    if (labelElement) {{
                        labelElement.style.opacity = state.labelOpacity;
                    }}
                    
                    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ª–∏–Ω–∏—é –Ω–∞ —Å–ª–æ–π
                    if (!routesLayer.hasLayer(lineData.polyline)) {{
                        lineData.polyline.addTo(routesLayer);
                    }}
                    if (!routesLayer.hasLayer(lineData.label)) {{
                        lineData.label.addTo(routesLayer);
                    }}
                }}
            }});
            snapshot = {{}};
        }}
        
        function toggleLocationsMode() {{
            locationsMode = !locationsMode;
            const btn = document.getElementById('locationsBtn');
            
            if (locationsMode) {{
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                saveSnapshot();
                
                // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –ª–∏–Ω–∏–∏ –∏ –º–µ—Ç–∫–∏
                allLines.all.forEach(lineData => {{
                    routesLayer.removeLayer(lineData.polyline);
                    routesLayer.removeLayer(lineData.label);
                }});
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª–æ–π –ª–æ–∫–∞—Ü–∏–π –Ω–∞ –∫–∞—Ä—Ç—É
                locationLayer.addTo(map);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–æ–∫–∞—Ü–∏–∏ —Å–æ–≥–ª–∞—Å–Ω–æ —É—Ä–æ–≤–Ω—é –∑—É–º–∞
                updateLocationsVisibility();
                
                btn.classList.add('active');
                btn.innerHTML = '–ú–∞—Ä—à—Ä—É—Ç—ã';
                
            }} else {{
                // –£–±–∏—Ä–∞–µ–º —Å–ª–æ–π –ª–æ–∫–∞—Ü–∏–π —Å –∫–∞—Ä—Ç—ã
                map.removeLayer(locationLayer);
                
                // –û—á–∏—â–∞–µ–º –≤—Å–µ –º–∞—Ä–∫–µ—Ä—ã –∏–∑ —Å–ª–æ—è –ª–æ–∫–∞—Ü–∏–π
                locationLayer.clearLayers();
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
                restoreSnapshot();
                
                btn.classList.remove('active');
                btn.innerHTML = '–õ–æ–∫–∞—Ü–∏–∏';
            }}
        }}
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –õ–æ–∫–∞—Ü–∏–∏
        document.getElementById('locationsBtn').addEventListener('click', function(e) {{
            e.stopPropagation();
            toggleLocationsMode();
        }});
        
        // –ë–ª–æ–∫–∏—Ä—É–µ–º —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª–∏–∫–æ–≤ –Ω–∞ –∫–∞—Ä—Ç—É –¥–ª—è –∫–Ω–æ–ø–∫–∏
        L.DomEvent.disableClickPropagation(document.getElementById('locationsBtn'));
        
        // =========================================================================
        // –õ–ï–ì–ï–ù–î–ê
        // =========================================================================
        
        const legend = L.control({{position: 'bottomleft'}});
        
        legend.onAdd = function() {{
            const div = L.DomUtil.create('div', 'legend');
            div.innerHTML = `
                <h4>–õ–µ–≥–µ–Ω–¥–∞</h4>
                <div class="legend-item">
                    <div class="legend-color" style="background: #3388ff;"></div>
                    <span>–†–∞–¥–∏–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ff3333;"></div>
                    <span>–ö–æ–ª—å—Ü–µ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #ff69b4;"></div>
                    <span>–ù–µ—Å–≤–∏–∂ ‚Äî –ë—Ä–µ—Å—Ç</span>
                </div>
                <div style="margin-top: 8px; border-top: 1px solid #ddd; padding-top: 8px;">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #28a745;"></div>
                        <span>–ü—Ä–æ–π—Ç–∏—Å—å</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #fd7e14;"></div>
                        <span>–ó–∞–π—Ç–∏</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #6f42c1;"></div>
                        <span>–≠–∫—Å–∫—É—Ä—Å–∏–∏</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #007bff;"></div>
                        <span>SPA</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #6c757d;"></div>
                        <span>–ó–∞–±—Ä–æ—à–∫–∏</span>
                    </div>
                </div>
            `;
            return div;
        }};
        
        legend.addTo(map);
        
        // =========================================================================
        // –ò–ù–§–û–†–ú–ê–¶–ò–û–ù–ù–´–ô –ë–õ–û–ö
        // =========================================================================
        
        const infoBlock = L.control({{position: 'bottomright'}});
        
        infoBlock.onAdd = function() {{
            const div = L.DomUtil.create('div', 'info-block');
            div.innerHTML = `
                <h4>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h4>
                <p>–ö–æ–ª–µ—Å–æ –º—ã—à–∏ ‚Äî –∑—É–º</p>
                <p>–õ–ö–ú + —Ç—è–Ω—É—Ç—å ‚Äî –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ</p>
                <p>–ö–ª–∏–∫ –Ω–∞ –ª–∏–Ω–∏—é/–º–µ—Ç–∫—É ‚Äî —Å–∫—Ä—ã—Ç—å</p>
                <p>–ö–Ω–æ–ø–∫–∞ ‚Äî —Ñ–∏–ª—å—Ç—Ä—ã —Å–ª–æ–µ–≤</p>
                <p>–õ–æ–∫–∞—Ü–∏–∏ ‚Äî –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</p>
            `;
            return div;
        }};
        
        infoBlock.addTo(map);
        
        console.log('–ö–∞—Ä—Ç–∞ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ë–µ–ª–∞—Ä—É—Å–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
        console.log('–í—Å–µ–≥–æ –≥–æ—Ä–æ–¥–æ–≤:', Object.keys(CITIES).length);
        console.log('–†–∞–¥–∏–∞–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤:', RADIAL_ROUTES.length);
        console.log('–ö–æ–ª—å—Ü–µ–≤—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤:', CIRCULAR_ROUTES.length);
        console.log('–õ–æ–∫–∞—Ü–∏–π:', LOCATIONS.length);
    </script>
</body>
</html>
'''
    
    return html


def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ä—Ç—ã."""
    
    print("=" * 60)
    print("–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç—ã –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ë–µ–ª–∞—Ä—É—Å–∏")
    print("=" * 60)
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º HTML
    html_content = generate_html()
    
    # –ò–º—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
    output_file = "belarus_map_real_location.html"
    
    # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —Ñ–∞–π–ª
    try:
        with open(output_file, "w", encoding="utf-8") as f:
            f.write(html_content)
        
        print(f"\n‚úì –§–∞–π–ª —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω: {output_file}")
        print(f"‚úì –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: {len(html_content):,} –±–∞–π—Ç")
        print(f"‚úì –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä–æ–¥–æ–≤: {len(CITIES)}")
        print(f"‚úì –†–∞–¥–∏–∞–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤: {len(RADIAL_ROUTES)}")
        print(f"‚úì –ö–æ–ª—å—Ü–µ–≤—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤: {len(CIRCULAR_ROUTES)}")
        print(f"‚úì –õ–æ–∫–∞—Ü–∏–π: {len(LOCATIONS)}")
        print("\n–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞—Ä—Ç—ã –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –≤ –±—Ä–∞—É–∑–µ—Ä–µ.")
        print("-" * 60)
        
    except Exception as e:
        print(f"\n‚úó –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞: {e}")
        return 1
    
    return 0


if __name__ == "__main__":
    exit(main())
